# Docker 기본 명령어 알아보기.

작동 순서 복습!

1. 도커 클라이언트에 명령어를 입력 후 도커서버로 보냄.
2. 도커 서버에서 컨테이너를 위한 이미지가 캐쉬 되어있는지 확인.
3. 없으면 도커 허브에서 다운을 받으며, 있다면 그 가지고 있는 이미지로 컨테이너를 생성한다.

```docker
docker run alpine ls

...

Unable to find image 'alpine:latest' locally
latest: Pulling from library/alpine
df20fa9351a1: Already exists
Digest: sha256:185518070891758909c9f839cf4ca393ee977ac378609f700f60a771a2dfe321
Status: Downloaded newer image for alpine:latest
bin
dev
etc
home
lib
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var
```

---

## 도커의 기본적인 명령어들

```docker
docker ps

...

// 도커에서 핑을 날리게끔 하는..
docker run alpine ping localhost

...

// 도커내 실행되어있는 프로세스를 확인한다.
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
f8f0b7948eb6        alpine              "ping localhost"    4 seconds ago       Up 3 seconds                            exciting_engelbart

```

### CONTAINER ID

1. 도커 컨테이너의 고유한 아이디 해쉬값이다. 실제로는 길다 (Ex: f8f0b7948eb6)

### IMAGE

1. 컨테이너 생성시 사용된 이미지의 명이다. (Ex: alpine)

### COMMAND

1. 컨테이너 시작시 실행될 명령어이다.
2. 대부분의 이미지에 내장이 되어있어 별도로 설정이 필요하지 않다. (Ex: ping localhost)

### CREATED

1. 도커 컨테이너가 생성된 시간이다. (Ex: 4 seconds ago)

### STATUS

1. 컨테이너의 상태이다. (Ex: Up 3 seconds)
2. 실행중은  `Up`, 종료는 `Exited`, 일시정지는 `Pause`.

### PORTS

1. 컨테이너가 개방한 포트와 호스트에 연결한 포트.
2. 특별한 설정을 하지 않은 경우 출력되지 않는다.

### NAMES

1. 컨테이너의 고유한 이름이다.
2. 생성시 `--name` 옵션으로 이름을 설정할 수 있다.
3. 설정하지 않으면 도커 엔진이 임의로 형용사와 명사를 조합해 설정한다. 
4. id와 마찬가지로 중복이 되지 않고, docker rename 명령어로 이름을 변경할 수 있다.

    `docker rename original-name changed-name`

### 특정 포맷 확인하기

특정 포맷을 확인하고 싶을때 사용한다.

`docker ps --format 'table{{.Names}}\t table{{.Image}}'`

모든 컨테이너를 확인하는 명령어

`docker ps -a`

# 도커 컨테이너 생명 주기

- 기본 생명 주기이다.

- docker run → 아래와 같이 두개로 쪼갤 수 있다.
    - docker create <이미지 이름>
    - docker start <컨테이너 아이디/이름>

## docker Create <이미지 이름>

- run hello-world 실행시..
- 파일 스냅샷을 하드 디스크로 옮기게 된다.

```docker
docker create hello-world

...

0d889928e48e1b690e822fcbc6c4bbb5e8ffb1d890a1ff47eb5441c4256b395b
```

## docker start <컨테이너 아이디/이름>

- 실제 프로세스에 실행이 된다.

```docker
docker start -a 0d889928e48e1b690e822fcbc6c4bbb5e8ffb1d890a1ff47eb5441c4256b395b

...

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
```

- -a 옵션은 attach
    - 도커가 실행되었을 때, 해당 컨테이너에 붙어 output을 출력시켜주는 역할을 한다.
