# 베포하기 위한 준비.

- Travis Ci → CI TOOL 이다.
- 일반적인 CI의 흐름

    → local에 code를 github push 한다.

    → github 에서는 마스터 저장소에 Push가 되면 → CI에게 소스가 Push 되었다는 hook을 날려줌.

    → CI TOOL에서는 업데이트된 소스를 github에서 가지고 온다.

    → CI에서 소스를 테스트 한다.

    → 테스트가 성공적으로 끝나면 AWS 같은 호스팅 서비스에 배포를 한다.

# Travis CI

- github login → Travis CI 로 로그인을 할 수 있다.
- `setting` → `repositories` 설정이 가능하다.
- `DashBoard`에 들어가서 확인이 가능.

## 테스트를 수행하고 배포해보자!

1. Docker 환경에서 실행해야 하므로 Docker를 구성하자!

    → Dockerfile.dev를 이용해서 도커 이미지를 생성한다.

2. Test를 어떻게 수행을 할 것인지 설정
3. 어떻게 AWS에 소스코드를 어떻게 배포할 것인지!

```yaml
# 관리자 권한을 실행하기 위함.
sudo: required

# 어떠한 언어 플랫폼을 사용할 것인지.
language: generic

# 도커 환경을 구성한다.
services:
 - docker

# 스크립트를 실행하는 환경을 셋팅
before_install:
	- echo "start Creating an image with docekrfile"
	- docker build -t <image name/tag> -f Dockerfile.dev .

# 실제 스크립트 실행구문
script:
	- docker run -e CI=true <image name/tag> npm run test -- --coverage

# 정상적으로 성공 후 실행할일.
after_success:
	- echo "Test Success"
```

# AWS 배포를 실행 해보자.

- EC2, EB를 사용할 예정이다.
- Elastic BeanStalk를 이용하여 배포해보자.

    → Elastic BeanStalk는 내부의 EC2, DB, Securiy 그룹, Auto-Scaling그룹, LB등 소프트웨어 업데이트시 자동으로 환경을 구성할 수 있게 해준다.
